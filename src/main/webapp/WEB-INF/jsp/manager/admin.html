<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>个人中心</title>
	<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="../css/index.css">
	<link rel="stylesheet" href="../css/admin.css">
    <script type="text/javascript" src="../js/index.js"></script>

</head>
<body>
	<input type="hidden" id="baseUrl" value="${pageContext.request.contextPath }/" />
	
	<!--管理部分 -->
	<div class="admin">
		<div class="selection">
			<ul>
				<li class="select active">用户管理</li>
				<li class="select">商家管理</li>
				<li class="select">订单管理</li>
				<li class="select">攻略资讯管理</li>
			</ul>
		</div>
		<!-- 用户管理 -->
		<div class="info active">
			<div>
				<input type="button" name="add" class="btn btn-primary add" id="add" value="添加" data-toggle="modal" data-target="#addUserModal">
			</div>
			<div>
				<table class="userInfo">
					<tr>
						<th class="headImg">头像</th>
						<th class="userName">用户名</th>
						<th class="userPassword">密码</th>
						<th class="email">邮箱</th>
						<th class="phoneNum">手机号</th>
						<th class="operation">操作</th>
					</tr>
					<c:forEach var="user" items="${user}">
						<tr>
							<td class="headImg">${user.userPhoto}</td>
							<td class="userName">${user.userName}</td>
							<td class="userPassword">${user.userPassword}</td>
							<td class="email">${user.userEmail}</td>
							<td class="phoneNum">${user.userPhone}</td>
							<td class="operation"><a href="#" class="editUser">修改</a> <a href="#" class="deleteUser">删除</a></td>
						</tr>
					</c:forEach>
				</table>
			</div>
		</div>
		<!-- 商家管理 -->
		<div class="info">
			<div class="apply">
				<div>
					<h3>商家入驻未审核列表</h3>
				</div>
				<div>
					<table class="applyInfo">
						<tr>
							<th class="userName">用户名</th>
							<th class="phoneNum">手机号</th>
							<th class="status">审核状态</th>
							<th class="operation">操作</th>
						</tr>
						<tr>
							<td class="userName">${user.userName}</td>
							<td class="phoneNum">${user.userPhone}</td>
							<td class="status"></td>
							<td class="operation"><a href="#" class="editUser">审核</a></td>
						</tr>
					</table>
				</div>
			</div>
			<div class="goods">
				<div>
					<h3>商品列表</h3>
				</div>
				<div>
					<input type="button" name="add" class="btn btn-primary add" id="add" value="添加" data-toggle="modal" data-target="#addGoodsModal">
				</div>
				<div>
					<table class="goodsInfo">
						<tr>
							<th class="goodsImg">商品图</th>
							<th class="goodsName">商品名称</th>
							<th class="price">商品金额</th>
							<th class="operation">操作</th>
						</tr>
						<c:forEach var="scenic" items="${scenic}">
							<tr>
								<td class="goodsImg">${scenic.scenicPicture}</td>
								<td class="goodsName">${scenic.scenicName}</td>
								<td class="price">${scenic.scenicCharge}</td>
								<td class="operation"><a href="#" class="detail">查看详情</a>
								<p><a href="#" class="delete">删除</a></p></td>
							</tr>
						</c:forEach>
					</table>
				</div>
			</div>
		</div>
		<!-- 订单管理 -->
		<div class="info">
			<div>
				<table class="orderInfo">
					<tr>
						<th class="orderNum">订单号</th>
						<th class="goodsName">商品名称</th>
						<th class="status">订单状态</th>
						<th class="price">订单金额</th>
						<th class="operation">操作</th>
					</tr>
					<c:forEach var="order" items="${order}">
						<tr>
							<td class="orderNum">${order.orderNo}</td>
							<td class="goodsName">${scenic.scenicName}</td>
							<td class="status">${order.orderNo}</td>
							<td class="price">${order.orderTotalPrice}</td>
							<td class="operation"><a href="#" class="operate">处理</a></td>
						</tr>
					</c:forEach>
				</table>
			</div>
		</div>
		<div class="info">
			<div>
				<input type="button" name="add" class="btn btn-primary add" id="addStrategy" value="添加" data-toggle="modal" data-target="#addStrategyModal">
			</div>
			<div>
				<table class="strategy">
					<tr>
						<th class="title">标题</th>
						<th class="photo">图片</th>
						<th class="operation">操作</th>
					</tr>
					<tr>
						<td class="title">${way.wayName}</td>
						<td class="photo">${way.wayPhoto}</td>
						<td class="operation"><a href="#" class="delete">删除</a></td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	<!-- Modal -->
	<div class="modal fade" id="addUserModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="addUser">添加用户</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" role="form" style="margin-top: 30px;"
						method="post">
				        <div class="form-group">
				            <label for="input1" class="col-sm-2 control-label">头像</label>
				            <div class="col-sm-8">
				                <input type="file" id="image-file" name="head-image" accept="image/gif, image/jpeg, image/png, image/jpg">
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="show" class="col-sm-2 control-label">预览</label>
				            <div class="col-sm-8">
				            	<img src="" class="head" id="headImg">
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="input2" class="col-sm-2 control-label">用户名</label>
				            <div class="col-sm-8">
				                <input type="text" class="form-control" id="input2" placeholder="请输入用户名" value="" />
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="input3" class="col-sm-2 control-label">密码</label>
				            <div class="col-sm-8">
				            	<input type="password" class="form-control" id="input3" placeholder="请输入密码" value=""/>
				            </div>
				        </div>
				      
				        <div class="form-group">
				            <label for="input4" class="col-sm-2 control-label">确认密码</label>
				            <div class="col-sm-8">
				            	<input type="password" class="form-control" id="input4" placeholder="请再次输入密码"/>
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="input5" class="col-sm-2 control-label">邮箱</label>
				            <div class="col-sm-8">
				            	<input type="text" class="form-control" id="input5" placeholder="请输入邮箱" value=""/>
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="input6" class="col-sm-2 control-label">手机号</label>
				            <div class="col-sm-8">
				            	<input type="text" class="form-control" id="input6" placeholder="请输入手机号" value=""/>
				            </div>
				        </div>
        
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
					<button id="submitBtn" type="button" class="btn btn-primary">提交</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="modifyUserModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="modifyUser">修改用户</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" role="form" style="margin-top: 30px;"
						method="post">
				        <div class="form-group">
				            <label for="modify1" class="col-sm-2 control-label">头像</label>
				            <div class="col-sm-8">
				                <input type="file" id="modify1" name="head-image" accept="image/gif, image/jpeg, image/png, image/jpg">
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="userHeadImg" class="col-sm-2 control-label">预览</label>
				            <div class="col-sm-8">
				            	<img src="" class="head" id="userHeadImg">
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="modify2" class="col-sm-2 control-label">用户名</label>
				            <div class="col-sm-8">
				                <input type="text" class="form-control" id="modify2" placeholder="请输入用户名" value="" />
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="modify3" class="col-sm-2 control-label">密码</label>
				            <div class="col-sm-8">
				            	<input type="password" class="form-control" id="modify3" placeholder="请输入密码" value=""/>
				            </div>
				        </div>
				      
				        <div class="form-group">
				            <label for="modify4" class="col-sm-2 control-label">确认密码</label>
				            <div class="col-sm-8">
				            	<input type="password" class="form-control" id="modify4" placeholder="请再次输入密码"/>
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="modify5" class="col-sm-2 control-label">邮箱</label>
				            <div class="col-sm-8">
				            	<input type="text" class="form-control" id="modify5" placeholder="请输入邮箱" value=""/>
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="modify6" class="col-sm-2 control-label">手机号</label>
				            <div class="col-sm-8">
				            	<input type="text" class="form-control" id="modify6" placeholder="请输入手机号" value=""/>
				            </div>
				        </div>
        
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
					<button id="submitBtn" type="button" class="btn btn-primary">提交</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="addStrategyModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="strategyModal">添加攻略资讯</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" role="form" style="margin-top: 30px;"
						method="post">
				        <div class="form-group">
				            <label for="inp1" class="col-sm-2 control-label">标题</label>
				            <div class="col-sm-8">
				                <input type="text" class="form-control" id="inp1" placeholder="请输入标题" value="" />
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="inp2" class="col-sm-2 control-label">内容</label>
				            <div class="col-sm-8">
				                <textarea rows="20" cols="60" id="inp2"></textarea>
				            </div>
				        </div>
				      
				        <div class="form-group">
				            <label for="inp3" class="col-sm-2 control-label">插入图片</label>
				            <div class="col-sm-8">
				            	<input type="file" name="goods-images" multiple="multiple" id="inp3">
				            </div>
				        </div>
        
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
					<button id="submitStrategy" type="submit" class="btn btn-primary">提交</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="addGoodsModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="addGoods">添加商品</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" role="form" style="margin-top: 30px;"
						method="post">
				        <div class="form-group">
				            <label for="in1" class="col-sm-2 control-label">商品名称</label>
				            <div class="col-sm-8">
				                <input type="text" class="form-control" id="in1" placeholder="请输入商品名称" value="" />
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="in2" class="col-sm-2 control-label">商品简介</label>
				            <div class="col-sm-8">
				                <textarea rows="10" cols="50" id="in2"></textarea>
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="in3" class="col-sm-2 control-label">详细地址</label>
				            <div class="col-sm-8">
				            	<input type="text" class="form-control" id="in3" placeholder="请输入详细地址" value=""/>
				            </div>
				        </div>
				      
				        <div class="form-group">
				            <label for="in4" class="col-sm-2 control-label">商品图片</label>
				            <div class="col-sm-8">
				            	<input type="file" name="goods-images" multiple="multiple" id="in4">
				            </div>
				        </div>
				        <div class="form-group">
				            <label for="in5" class="col-sm-2 control-label">价格</label>
				            <div class="col-sm-8">
				            	<input type="text" class="form-control" id="in5" placeholder="请输入价格" value=""/>
				            </div>
				        </div>
        
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
					<button id="submitGoods" type="submit" class="btn btn-primary">提交</button>
				</div>
			</div>
		</div>
	</div>
	
	<!--底部部分 -->
    <div class="foot">
        <hr style="height:1px;border:none;border-top:1px solid gray;" />
        <div>
            <table>
                <tr>
                    <th>关于畅游天下</th>
                    <th>有话要说</th>
                    <th>服务保障</th>
                </tr>
                <tr>
                    <td><a href="#">帮助中心</a></td>
                    <td><a href="#">客服热线</a></td>
                    <td><a href="#">隐私政策</a></td>
                </tr>
                <tr>
                    <td><a href="#">法律声明</a></td>
                    <td><a href="#">我要投诉</a></td>
                    <td><a href="#">争议调解</a></td>
                </tr>
            </table>
        </div>
        <div class="footer">
            <p>Copyright © 2018-2019 Changyou.com | <a href="#">营业执照</a> | ICP证：xxxxxxxxxx | xxxxxxxxxxx | xxxxxxxxxx</p>
            <p>违法和不良信息举报电话：xxx-xxxxxxxx 违法和不良信息举报邮箱：xxxxxxx@xxxxxx.com</p>
        </div>
    </div>



    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script> 
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript">
    $(".select").on("click", function (e) {
            e.preventDefault();
            var i=$(this).index();
            $(".select").removeClass("active").eq(i).addClass("active"),
            $(".info").removeClass("active").eq(i).addClass("active")
        });
    $(".editUser").on("click",function(){
		var td = $(this).parent().siblings();

		// $("#modify1").val(td.eq(1).text());
		$("#modify2").val(td.eq(1).text());
		$("#modify3").val(td.eq(2).text());
		$("#modify5").val(td.eq(3).text());
		$("#modify6").val(td.eq(4).text());
		$("#modifyUserModal").modal();
		return false;
	});
    </script>

    <script type="text/javascript">
    	var result = $("#headImg"); //获得最后图片显示的img
    	var input = $("#image-file");

    	//检测浏览器是否兼容FileReader因为这个 html5的新特性
    	if (typeof FileReader === 'undefined') {
        	alert("抱歉，你的浏览器不支持 FileReader");
        	input[0].setAttribute('disabled', 'disabled');
        //这里加个[0]将jquery对象转化成dom对象
    	} else {
        	input.get(0).addEventListener('change', readFile, false);//同上
    	}

    	function readFile() {
        	var file = this.files[0];
        	if (!/image\/\w+/.test(file.type)) {
            	alert("文件必须为图片！");
            	return false;
        	}
        	var reader = new FileReader();
        	reader.readAsDataURL(file);
        	reader.onload = function (e) {
            	result.attr("src", this.result);
        	}
    	}

    	var result = document.getElementById("headImg");
    	var input = document.getElementById("image-file");

    	if (typeof FileReader === 'undefined') {
        	result.innerHTML = "抱歉，你的浏览器不支持 FileReader";
        	input.setAttribute('disabled', 'disabled');
    	} else {
        	input.addEventListener('change', readFile, false);
    	}

    	function readFile() {
        	var file = this.files[0];
        	if (!/image\/\w+/.test(file.type)) {
            	alert("文件必须为图片！");
            	return false;
        	}
        	var reader = new FileReader();
        	reader.readAsDataURL(file);
        	reader.onload = function (e) {
            	result.src = this.result;
        	}
    	}
    </script>

</body>
</html>